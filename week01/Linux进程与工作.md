查看进程树：`pstree`

* `-A` 进程树以ASCII字符连接
* `-p` 同时列出每个进程的PID
* `-u` 同时列出每个进程的所属账户

子进程要正常终止时，或该进程结束时，会向父进程传递一个`SIGCHLD`信号，父进程做资源回收和收尾工作。但如果父进程没做收尾工作，导致进程的进程控制块(PCB)仍驻留在内存中，就时僵尸进程。

如果父进程结束，未能及时收回子进程，子进程称为孤儿进程，成为init的子进程。

进程0是内核初始化，创建PID为1的init子进程，进程0就转为交换进程（或称空闲进程），init进程时第一个用户态进程。（现被systemd取代）

-----

Session主要针对终端建立，Session中每个进程称为一个工作（job）。

命令末尾加`&`可以使其后台运行。`Ctrl+z`可以将工作在后台挂起。

查看后台挂起的工作：`jobs`，回显中，第一列为job的编号；第二列的+表示最近被放置到后台，-表示倒数第二。

`fg %job编号`可以将后台工作置于前台，若省略`%job编号`则对标记+的工作操作。（在bash中可以省略`%`）

`bg %job编号`可以使工作在后台运行。

`kill -信号值 %job编号`可以杀掉工作。

|信号值|作用|
|---|---|
|1|重新读取参数运行，类似于restart|
|2|如同Ctrl+c的操作退出|
|9|强制终止|
|15|以正常的方式终止（默认）|

-----

CPU平均负载：

`top`或`htop`的回显里Load average指的时CPU在1, 5, 15分钟内的平均负载。每个CPU核心的平均负载的临界值默认为1。

``` Bash
# 查看物理CPU的个数
$ cat /proc/cpuinfo | grep "physical id" | sort | uniq | wc -l
# 查看每个CPU的核心数
$ cat /proc/cpuinfo | grep "physical id" | grep "0" | wc -l
```

`top`中列的含义：

* `PR` 动态优先级（取值范围0\~139）； `NI` nice值，静态优先级（取值范围20\~19）。优先级的值越小，优先级越高。
* `VIRT`, `RES`, `SHR` 虚拟内存申请量，物理内存使用量（驻留内存量），共享内存量

快捷键：

* `M` 根据驻留内存排序；`P` 根据CPU使用百分比排序； `T` 根据时间排序
* `I` 切换显示单核平均负载和CPU平局负载， `i` 忽略闲置和僵尸进程

-----

`ps`常用命令：

``` Bash
$ ps aux
$ ps axjf
```


